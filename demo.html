<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>demo</title>
    <script src="./echarts.js" type="text/javascript"></script>
    <script src="js/china.js"></script>
    <style>
        .sanmu{
            width: 99%;
            height: 92%;
        }
        .sanmuw{
            width: 67%;
            height: 75%;
            position: absolute;
            top: 12%;
            left: 12%;
        }
    </style>
</head>
<body>
    <div>三木大佐</div>
    <div class="sanmu">
        <div id="sss" class="sanmuw"></div>
    </div>
    <script style="text/javascript">
        var sanmu = echarts.init(document.getElementById('sss'));

//        option = {
//            title : {
//                text: '订单量',
//                subtext: '纯属虚构',
//                x:'center'
//            },
//            tooltip : {
//                trigger: 'item'
//            },
//            legend: {
//                orient: 'vertical',
//                x:'left',
//                data:['订单量']
//            },
//            dataRange: {
//                x: 'left',
//                y: 'bottom',
//                splitList: [
//                    {start: 1500},
//                    {start: 900, end: 1500},
//                    {start: 310, end: 1000},
//                    {start: 200, end: 300},
//                    {start: 10, end: 200, label: '10 到 200（自定义label）'},
//                    {start: 5, end: 5, label: '5（自定义特殊颜色）', color: 'black'},
//                    {end: 10}
//                ],
//                color: ['#E0022B', '#E09107', '#A3E00B']
//            },
//            toolbox: {
//                show: true,
//                orient : 'vertical',
//                x: 'right',
//                y: 'center',
//                feature : {
//                    mark : {show: true},
//                    dataView : {show: true, readOnly: false},
//                    restore : {show: true},
//                    saveAsImage : {show: true}
//                }
//            },
//            roamController: {
//                show: true,
//                x: 'right',
//                mapTypeControl: {
//                    'china': true
//                }
//            },
//            series : [
//                {
//                    name: '订单量',
//                    type: 'map',
//                    mapType: 'china',
//                    roam: false,
//                    itemStyle:{
//                        normal:{
//                            label:{
//                                show:true,
//                                textStyle: {
//                                    color: "rgb(249, 249, 249)"
//                                }
//                            }
//                        },
//                        emphasis:{label:{show:true}}
//                    },
//                    data:[
//                        {name: '北京',value: Math.round(Math.random()*2000)},
//                        {name: '天津',value: Math.round(Math.random()*2000)},
//                        {name: '上海',value: Math.round(Math.random()*2000)},
//                        {name: '重庆',value: Math.round(Math.random()*2000)},
//                        {name: '河北',value: 0},
//                        {name: '河南',value: Math.round(Math.random()*2000)},
//                        {name: '云南',value: 5},
//                        {name: '辽宁',value: 305},
//                        {name: '黑龙江',value: Math.round(Math.random()*2000)},
//                        {name: '湖南',value: 200},
//                        {name: '安徽',value: Math.round(Math.random()*2000)},
//                        {name: '山东',value: Math.round(Math.random()*2000)},
//                        {name: '新疆',value: Math.round(Math.random()*2000)},
//                        {name: '江苏',value: Math.round(Math.random()*2000)},
//                        {name: '浙江',value: Math.round(Math.random()*2000)},
//                        {name: '江西',value: Math.round(Math.random()*2000)},
//                        {name: '湖北',value: Math.round(Math.random()*2000)},
//                        {name: '广西',value: Math.round(Math.random()*2000)},
//                        {name: '甘肃',value: Math.round(Math.random()*2000)},
//                        {name: '山西',value: Math.round(Math.random()*2000)},
//                        {name: '内蒙古',value: Math.round(Math.random()*2000)},
//                        {name: '陕西',value: Math.round(Math.random()*2000)},
//                        {name: '吉林',value: Math.round(Math.random()*2000)},
//                        {name: '福建',value: Math.round(Math.random()*2000)},
//                        {name: '贵州',value: Math.round(Math.random()*2000)},
//                        {name: '广东',value: Math.round(Math.random()*2000)},
//                        {name: '青海',value: Math.round(Math.random()*2000)},
//                        {name: '西藏',value: Math.round(Math.random()*2000)},
//                        {name: '四川',value: Math.round(Math.random()*2000)},
//                        {name: '宁夏',value: Math.round(Math.random()*2000)},
//                        {name: '海南',value: Math.round(Math.random()*2000)},
//                        {name: '台湾',value: Math.round(Math.random()*2000)},
//                        {name: '香港',value: Math.round(Math.random()*2000)},
//                        {name: '澳门',value: Math.round(Math.random()*2000)}
//                    ]
//                }
//            ]
//        };
//        sanmu.setOption(option);
    </script>
    <script>
      var panelData1 = {"ft":1,
          "title":"文献服务系统运行态势 Map.1",
          "subtitle":"服务站及用户管理平台运行监测",
          "legend":["服务站","用户管理平台"],
          "chart1Data":{
              "all":671,
              "charts":{"中心站":610,"兰州服务站":80,"杭州服务站":10,"济南服务站":10,"南京服务站":10,"郑州服务站":10}
          },
          "chart2Data":{
              "all":0,
              "charts":{"中国社会科学院图书馆":0,"海南大学":0,"云南农业大学":0,"天津科技大学":0,"哈尔滨商业大学":0,"苏州大学":0}
          },
          "disMap":{
              "杭州":["杭州服务站"],
              "济南":["济南服务站"],
              "宁波":["宁波服务站"],
              "苏州":["苏州服务站"],
              "深圳":["深圳服务站"],
              "石家庄":["石家庄服务站"],
              "太原":["太原服务站"],
              "沈阳":["沈阳高新区服务站"],
              "乌鲁木齐":["新疆兵团服务站"],
              "济宁":["济宁高新区服务站"],
              "贵阳":["贵阳服务站"],
              "佛山":["佛山高新区服务站"],
              "北京":["中国社会科学院图书馆"],
              "西宁":["西宁服务站"],
              "北京":["交通运输服务站"],
              "南昌":["南昌服务站"],
              "长沙":["长沙服务站"],
              "银川":["银川服务站"],
              "海口":["海南大学"],
              "北京":["电子科技服务站"],
              "昆明":["云南农业大学"],
              "天津":["天津科技大学"],
              "广州":["广州服务站"],
              "拉萨":["拉萨服务站"],
              "哈尔滨":["哈尔滨商业大学"],
              "苏州":["苏州大学"],
              "郑州":["河南工业大学"],
              "澳门":["澳门科技大学合作馆"],
              "青岛":["青岛服务站"],
              "武汉":["武汉服务站"],
              "天津":["天津服务站"],
              "长春":["长春服务站"],
              "海口":["海口服务站"],
              "武汉":["长江水利委员会长江科学院"],
              "西安":["陕西省科技资源中心"],
              "嘉兴":["嘉兴学院"],
              "西安":["西安电子科技大学"],
              "南宁":["南宁服务站"],
              "合肥":["合肥服务站"],
              "呼和浩特":["呼和浩特开发区服务站"],
              "兰州":["兰州生物制品研究所"],
              "北京":["北京市科学技术研究院"],
              "南京":["南京服务站"],
              "兰州":["兰州服务站"],
              "郑州":["郑州服务站"]
          },
          "onMapData":
                  [
                      [
                          {"name":"北京M","value":0},
                          {"name":"兰州","value":80}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"杭州","value":10}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"济南","value":10}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"南京","value":10}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"郑州","value":10}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"宁波","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"苏州","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"深圳","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"石家庄","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"太原","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"沈阳","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"乌鲁木齐","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"济宁","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"贵阳","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"佛山","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"西宁","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"北京","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"南昌","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"长沙","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"银川","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"北京","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"广州","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"拉萨","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"青岛","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"武汉","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"天津","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"长春","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"海口","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"南宁","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"合肥","value":0}
                      ],
                      [
                          {"name":"北京M","value":0},{"name":"呼和浩特","value":0}
                      ]
                  ],
          "onMapData2":[
              [
                  {"name":"北京","value":0},{"name":"北京","value":0}
              ],
              [
                  {"name":"北京","value":0},{"name":"海口","value":0}
              ],
              [
                  {"name":"北京","value":0},{"name":"昆明","value":0}
              ],
              [
                  {"name":"北京","value":0},{"name":"天津","value":0}
              ],
              [
                  {"name":"北京","value":0},{"name":"哈尔滨","value":0}
              ],
              [
                  {"name":"北京","value":0},{"name":"苏州","value":0}
              ],
              [
                  {"name":"北京","value":0},{"name":"郑州","value":0}
              ],
              [
                  {"name":"北京","value":0},{"name":"澳门","value":0}
              ],
              [
                  {"name":"北京","value":0},{"name":"武汉","value":0}
              ],
              [
                  {"name":"北京","value":0},{"name":"西安","value":0}
              ],
              [
                  {"name":"北京","value":0},{"name":"嘉兴","value":0}
              ],
              [
                  {"name":"北京","value":0},{"name":"西安","value":0}
              ],
              [
                  {"name":"北京","value":0},{"name":"兰州","value":0}
              ],
              [
                  {"name":"北京","value":0},{"name":"北京","value":0}
              ]
          ],
          "cityCordData":{
              "上海":[121.4648,31.2891],
              "乌鲁木齐":[87.9236,43.5883],
              "佛山":[112.8955,23.1097],
              "兰州":[103.5901,36.3043],
              "北京":[116.4551,40.2539],
              "南京":[118.8062,31.9208],
              "南宁":[108.479,23.1152],
              "南昌":[116.0046,28.6633],
              "合肥":[117.29,32.0581],
              "呼和浩特":[111.4124,40.4901],
              "哈尔滨":[127.9688,45.368],
              "嘉兴":[120.9155,30.6354],
              "天津":[117.4219,39.4189],
              "太原":[112.3352,37.9413],
              "宁波":[121.5967,29.6466],
              "广州":[113.5107,23.2196],
              "成都":[103.9526,30.7617],
              "拉萨":[91.1865,30.1465],
              "昆明":[102.9199,25.4663],
              "杭州":[119.5313,29.8773],
              "武汉":[114.3896,30.6628],
              "沈阳":[123.1238,42.1216],
              "济南":[117.1582,36.8701],
              "济宁":[116.8286,35.3375],
              "海口":[110.3893,19.8516],
              "深圳":[114.5435,22.5439],
              "石家庄":[114.4995,38.1006],
              "福州":[119.4543,25.9222],
              "苏州":[120.6519,31.3989],
              "西宁":[101.4038,36.8207],
              "西安":[109.1162,34.2004],
              "贵阳":[106.6992,26.7682],
              "郑州":[113.4668,34.6234],
              "重庆":[107.7539,30.1904],
              "银川":[106.3586,38.1775],
              "长春":[125.8154,44.2584],
              "长沙":[113.0823,28.2568],
              "青岛":[120.4651,36.3373],
              "澳门":[113.53802,22.189923],
              "北京M":[116.3129672,39.9083141]
          }
      };

      var convertData = function (data) {
          var res = [];
          for (var i = 0; i < data.length; i++) {
              var dataItem = data[i];
              var fromCoord = geoCoordMap[dataItem[0].name];
              var toCoord = geoCoordMap[dataItem[1].name];
              if (fromCoord && toCoord) {
                  res.push({
                      fromName: dataItem[0].name,
                      toName: dataItem[1].name,
                      coords: [fromCoord, toCoord]
                  });
              }
          }
          return res;
      };

      [['北京',panelData1.onMapData],["北京M",panelData1.onMapData2]].forEach(function(item,i){
                  console.log(i);
                  console.log(item);
                  //console.log('data1',convertData(item[1]));
                  item[1].map(function (dataItem) {
                      console.log(dataItem);
              //return {
              //    name: dataItem[1].name.concat(",").concat([dataItem[1].value]),
              //    value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])
              //};
//                        if (mapDic1[dataItem[1].name] == undefined || mapDic1[dataItem[1].name][0] == undefined) {
//                            console.log('name',dataItem[1].name.concat(",").concat([dataItem[1].value]));
//                            console.log('value',geoCoordMap[dataItem[1].name].concat([dataItem[1].value]))
//                            return {
//                                name: dataItem[1].name.concat(",").concat([dataItem[1].value]),
//                                value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])
//                            }
//                        }
//                        else {
//                            return {
//                                name: mapDic1[dataItem[1].name][0].concat(",").concat([dataItem[1].value]),
//                                value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])
//                            }
//                        };
                  })

              })
    </script>
</body>
</html>